# Web3æ•™è‚²å¹³å° - è¯¦ç»†æŠ€æœ¯è®²è§£æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºåŒºå—é“¾æŠ€æœ¯çš„å»ä¸­å¿ƒåŒ–æ•™è‚²å¹³å°ï¼Œé›†æˆäº†æ™ºèƒ½åˆçº¦ã€å‰ç«¯åº”ç”¨å’Œåç«¯æœåŠ¡ï¼Œå®ç°äº†è¯¾ç¨‹äº¤æ˜“ã€ä»£å¸è´¨æŠ¼å’Œç”¨æˆ·ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§
- **å»ä¸­å¿ƒåŒ–è¯¾ç¨‹äº¤æ˜“**: åŸºäºæ™ºèƒ½åˆçº¦çš„è¯¾ç¨‹è´­ä¹°å’Œæ”¯ä»˜
- **ä»£å¸ç»æµç³»ç»Ÿ**: YDTokenä½œä¸ºå¹³å°é€šè¯ï¼Œæ”¯æŒETHå…‘æ¢å’Œè´¨æŠ¼æŒ–çŸ¿
- **æ··åˆå­˜å‚¨æ¶æ„**: åŒºå—é“¾å­˜å‚¨æ ¸å¿ƒæ•°æ®ï¼Œä¼ ç»Ÿæ•°æ®åº“å­˜å‚¨æ‰©å±•ä¿¡æ¯
- **Web3èº«ä»½è®¤è¯**: MetaMaské’±åŒ…é›†æˆï¼Œæ•°å­—ç­¾åéªŒè¯

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚â—„â”€â”€â–ºâ”‚  åç«¯ (Node.js)  â”‚â—„â”€â”€â–ºâ”‚ æ•°æ®åº“ (MySQL)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                                              
         â–¼                                              
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              
â”‚æ™ºèƒ½åˆçº¦(Solidity)â”‚â—„â”€â”€â–ºâ”‚  åŒºå—é“¾(Sepolia) â”‚              
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              
```

---

## ğŸ”— æ™ºèƒ½åˆçº¦å±‚ (contracts/)

### ğŸ“ é¡¹ç›®ç»“æ„
```
contracts/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ YDToken.sol          # ERC20ä»£å¸åˆçº¦
â”‚   â”œâ”€â”€ CourseManager.sol    # è¯¾ç¨‹ç®¡ç†åˆçº¦
â”‚   â””â”€â”€ SimpleStaking.sol    # è´¨æŠ¼æŒ–çŸ¿åˆçº¦
â”œâ”€â”€ package.json            # ä¾èµ–å’Œè„šæœ¬é…ç½®
â””â”€â”€ hardhat.config.ts       # Hardhaté…ç½®æ–‡ä»¶
```

### ğŸª™ YDToken.sol - å¹³å°ä»£å¸åˆçº¦

**æ ¸å¿ƒåŠŸèƒ½è§£æ:**

1. **ERC20æ ‡å‡†ä»£å¸**
   ```solidity
   contract YDToken is ERC20, Ownable {
       constructor() ERC20("YunDa Token", "YD") Ownable(msg.sender) {
           _mint(msg.sender, 1000000 * 10 ** 18); // é“¸é€ 100ä¸‡YDä»£å¸
       }
   }
   ```

2. **ETHå…‘æ¢æœºåˆ¶**
   - **æ±‡ç‡**: 1 ETH = 1000 YD
   - **è‡ªåŠ¨é“¸é€ **: ç”¨æˆ·å‘é€ETHåè‡ªåŠ¨è·å¾—YDä»£å¸
   - **èµ„é‡‘æµå‘**: ETHç›´æ¥å‘é€ç»™åˆçº¦æ‰€æœ‰è€…
   
   ```solidity
   function exchangeETHForYD() external payable {
       require(msg.value > 0, "Must send ETH to exchange");
       uint256 ydAmount = msg.value * EXCHANGE_RATE; // è®¡ç®—YDæ•°é‡
       _mint(msg.sender, ydAmount); // é“¸é€ ä»£å¸ç»™ç”¨æˆ·
       payable(owner()).transfer(msg.value); // ETHè½¬ç»™æ‰€æœ‰è€…
   }
   ```

3. **ç®¡ç†åŠŸèƒ½**
   - **é“¸é€ æƒé™**: ä»…é™æ‰€æœ‰è€…å¯ä»¥ç›´æ¥é“¸é€ ä»£å¸
   - **æ‰¹é‡è½¬è´¦**: æ–¹ä¾¿ç»™å¤šä¸ªç”¨æˆ·å‘æ”¾æµ‹è¯•ä»£å¸

**æŠ€æœ¯è¦ç‚¹:**
- ç»§æ‰¿OpenZeppelinçš„ERC20å’ŒOwnableåˆçº¦
- ä½¿ç”¨18ä½å°æ•°ç²¾åº¦
- å®ç°äº†ä»£å¸ç»æµçš„åŸºç¡€å¾ªç¯

### ğŸ“ CourseManager.sol - è¯¾ç¨‹ç®¡ç†åˆçº¦

**æ•°æ®ç»“æ„è®¾è®¡:**

```solidity
struct Course {
    uint256 id;           // è¯¾ç¨‹ID
    string title;         // è¯¾ç¨‹æ ‡é¢˜
    string description;   // è¯¾ç¨‹æè¿°
    uint256 price;        // ä»·æ ¼(YDä»£å¸ï¼Œ18ä½å°æ•°)
    address instructor;   // è®²å¸ˆåœ°å€
    bool active;          // æ˜¯å¦æ¿€æ´»
    uint256 createdAt;    // åˆ›å»ºæ—¶é—´
}

struct User {
    string nickname;      // ç”¨æˆ·æ˜µç§°
    string bio;          // ä¸ªäººç®€ä»‹
    uint256 updatedAt;   // æ›´æ–°æ—¶é—´
}
```

**æ ¸å¿ƒåŠŸèƒ½å®ç°:**

1. **è¯¾ç¨‹åˆ›å»ºæµç¨‹**
   ```solidity
   function createCourse(string memory title, string memory description, uint256 price) 
       external returns (uint256) {
       courseCounter++; // é€’å¢è¯¾ç¨‹ID
       courses[courseCounter] = Course({...}); // å­˜å‚¨è¯¾ç¨‹ä¿¡æ¯
       userCourses[msg.sender].push(courseCounter); // è®°å½•è®²å¸ˆè¯¾ç¨‹åˆ—è¡¨
       emit CourseCreated(...); // å‘å‡ºäº‹ä»¶
   }
   ```

2. **è¯¾ç¨‹è´­ä¹°æœºåˆ¶**
   - **æƒé™éªŒè¯**: ä¸èƒ½è´­ä¹°è‡ªå·±çš„è¯¾ç¨‹
   - **é‡å¤è´­ä¹°æ£€æŸ¥**: é˜²æ­¢é‡å¤è´­ä¹°
   - **ä»£å¸è½¬è´¦**: è‡ªåŠ¨å°†YDä»£å¸è½¬ç»™è®²å¸ˆ
   
   ```solidity
   function purchaseCourse(uint256 courseId) external {
       require(!purchases[msg.sender][courseId], "Already purchased");
       require(ydToken.transferFrom(msg.sender, course.instructor, course.price));
       purchases[msg.sender][courseId] = true;
   }
   ```

3. **æ•°æ®æŸ¥è¯¢ä¼˜åŒ–**
   - **åˆ†é¡µæŸ¥è¯¢**: é¿å…gasæ¶ˆè€—è¿‡å¤§
   - **æ‰¹é‡è·å–**: æ”¯æŒä¸€æ¬¡æ€§è·å–å¤šä¸ªè¯¾ç¨‹ä¿¡æ¯
   
**æŠ€æœ¯ç‰¹ç‚¹:**
- ä½¿ç”¨mappingå®ç°é«˜æ•ˆçš„æ•°æ®å­˜å‚¨å’Œæ£€ç´¢
- äº‹ä»¶æœºåˆ¶ä¾¿äºå‰ç«¯ç›‘å¬çŠ¶æ€å˜åŒ–
- åˆ†é¡µæŸ¥è¯¢é¿å…åŒºå—é“¾æŸ¥è¯¢é™åˆ¶

### ğŸ’° SimpleStaking.sol - è´¨æŠ¼æŒ–çŸ¿åˆçº¦

**è´¨æŠ¼å¥–åŠ±ç®—æ³•:**

```solidity
uint256 public constant DAILY_REWARD_RATE = 100; // 1% = 100/10000
uint256 public constant SECONDS_PER_DAY = 86400;

function calculateReward(address user) external view returns (uint256) {
    uint256 daysStaked = (block.timestamp - stakeTimestamp[user]) / SECONDS_PER_DAY;
    return (stakedAmount[user] * DAILY_REWARD_RATE * daysStaked) / 10000;
}
```

**æ ¸å¿ƒæœºåˆ¶:**

1. **è´¨æŠ¼æœºåˆ¶**
   - **é‡æ–°è´¨æŠ¼å¤„ç†**: å¦‚æœç”¨æˆ·å·²æœ‰è´¨æŠ¼ï¼Œå…ˆè‡ªåŠ¨å–å‡ºå†è´¨æŠ¼æ–°é‡‘é¢
   - **æ—¶é—´æˆ³è®°å½•**: ç²¾ç¡®è®°å½•è´¨æŠ¼å¼€å§‹æ—¶é—´

2. **å¥–åŠ±è®¡ç®—**
   - **æ—¥æ”¶ç›Šç‡**: 1%å›ºå®šæ—¥æ”¶ç›Š
   - **å¤åˆ©æ•ˆåº”**: æ¯æ¬¡é‡æ–°è´¨æŠ¼é‡ç½®è®¡æ—¶å™¨
   - **å³æ—¶ç»“ç®—**: å–å‡ºæ—¶ç«‹å³è®¡ç®—å¹¶å‘æ”¾å¥–åŠ±

3. **å®‰å…¨ç‰¹æ€§**
   - **æˆæƒè½¬è´¦**: ä½¿ç”¨transferFromç¡®ä¿ç”¨æˆ·æˆæƒ
   - **çŠ¶æ€é‡ç½®**: å–å‡ºåæ¸…ç©ºç”¨æˆ·è´¨æŠ¼è®°å½•
   - **ä½™é¢æ£€æŸ¥**: åˆçº¦å¿…é¡»æœ‰è¶³å¤Ÿä»£å¸æ”¯ä»˜å¥–åŠ±

**æŠ€æœ¯äº®ç‚¹:**
- ç®€å•è€Œæœ‰æ•ˆçš„è´¨æŠ¼å¥–åŠ±ç®—æ³•
- é˜²æ­¢é‡å…¥æ”»å‡»çš„çŠ¶æ€ç®¡ç†
- Gasä¼˜åŒ–çš„æŸ¥è¯¢å‡½æ•°

### ğŸš€ éƒ¨ç½²é…ç½®

**ç½‘ç»œé…ç½®** (hardhat.config.ts):
```typescript
sepolia: {
  url: process.env.SEPOLIA_RPC_URL,
  accounts: [process.env.SEPOLIA_PRIVATE_KEY]
}
```

**åˆçº¦åœ°å€** (Sepoliaæµ‹è¯•ç½‘):
- YDToken: `0x752250B9471b77e85c3DE330db8a5d7802Eb87d7`
- CourseManager: `0xCb4A483c8F1F84BF0128a7081c0d4FC4A2607EE7`
- SimpleStaking: `0xf5924164C4685f650948bf4a51124f0CB24DA026`

---

## ğŸ¨ å‰ç«¯åº”ç”¨å±‚ (frontend/)

### ğŸ“ é¡¹ç›®ç»“æ„
```
frontend/src/
â”œâ”€â”€ components/          # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Layout.tsx      # åº”ç”¨å¸ƒå±€
â”‚   â”œâ”€â”€ WalletButton.tsx# é’±åŒ…è¿æ¥ç»„ä»¶
â”‚   â””â”€â”€ ui/            # UIç»„ä»¶åº“
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Courses.tsx    # è¯¾ç¨‹åˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ Staking.tsx    # è´¨æŠ¼é¡µé¢
â”‚   â””â”€â”€ Profile.tsx    # ä¸ªäººèµ„æ–™é¡µ
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ useWallet.ts   # é’±åŒ…ç®¡ç†
â”‚   â””â”€â”€ useContracts.ts# åˆçº¦äº¤äº’
â”œâ”€â”€ services/          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.ts         # APIæœåŠ¡
â”‚   â””â”€â”€ authService.ts # è®¤è¯æœåŠ¡
â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â””â”€â”€ types/             # ç±»å‹å®šä¹‰
```

### ğŸ”§ æŠ€æœ¯æ ˆåˆ†æ

**æ ¸å¿ƒä¾èµ–:**
```json
{
  "react": "^19.1.1",           // React 19æœ€æ–°ç‰ˆ
  "ethers": "^6.15.0",          // Web3äº¤äº’åº“
  "zustand": "^5.0.8",          // çŠ¶æ€ç®¡ç†
  "react-router": "^7.8.2",     // è·¯ç”±ç®¡ç†  
  "tailwindcss": "^4.1.13",     // CSSæ¡†æ¶
  "vite": "^7.1.2"              // æ„å»ºå·¥å…·
}
```

**æ„å»ºé…ç½®ç‰¹ç‚¹:**
- **Vite**: æå¿«çš„å¼€å‘æœåŠ¡å™¨å’Œæ„å»ºå·¥å…·
- **TypeScript**: å…¨é¢çš„ç±»å‹æ£€æŸ¥å’Œæ™ºèƒ½æç¤º
- **TailwindCSS v4**: ç°ä»£åŒ–çš„åŸå­CSSæ¡†æ¶
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥å’Œæ ¼å¼åŒ–

### ğŸ” é’±åŒ…é›†æˆ (useWallet Hook)

**æ ¸å¿ƒåŠŸèƒ½å®ç°:**

1. **MetaMaskè¿æ¥ç®¡ç†**
   ```typescript
   const connectWallet = async () => {
     const accounts = await window.ethereum.request({
       method: 'eth_requestAccounts',
     });
     setAccount(accounts[0]);
     setConnected(true);
     await checkNetwork();
   };
   ```

2. **ç½‘ç»œæ£€æŸ¥ä¸åˆ‡æ¢**
   ```typescript
   const switchToSepolia = async () => {
     try {
       await window.ethereum.request({
         method: 'wallet_switchEthereumChain',
         params: [{ chainId: '0xaa36a7' }], // Sepolia
       });
     } catch (error) {
       if (error.code === 4902) {
         // ç½‘ç»œä¸å­˜åœ¨ï¼Œè‡ªåŠ¨æ·»åŠ Sepolia
         await addSepoliaNetwork();
       }
     }
   };
   ```

3. **äº‹ä»¶ç›‘å¬æœºåˆ¶**
   ```typescript
   useEffect(() => {
     window.ethereum.on('accountsChanged', handleAccountsChanged);
     window.ethereum.on('chainChanged', handleChainChanged);
     
     return () => {
       window.ethereum?.removeListener('accountsChanged', handleAccountsChanged);
       window.ethereum?.removeListener('chainChanged', handleChainChanged);
     };
   }, []);
   ```

**æŠ€æœ¯ç‰¹ç‚¹:**
- **è‡ªåŠ¨é‡è¿**: é¡µé¢åˆ·æ–°åè‡ªåŠ¨æ£€æŸ¥è¿æ¥çŠ¶æ€
- **ç½‘ç»œåˆ‡æ¢**: è‡ªåŠ¨æ·»åŠ Sepoliaæµ‹è¯•ç½‘
- **çŠ¶æ€æŒä¹…åŒ–**: Zustandä¸­é—´ä»¶è‡ªåŠ¨ä¿å­˜è¿æ¥çŠ¶æ€

### âš¡ æ™ºèƒ½åˆçº¦äº¤äº’ (useContracts Hook)

**æ¶æ„è®¾è®¡:**
```typescript
// Provider/Signerå·¥å‚æ¨¡å¼
const getProvider = () => new ethers.BrowserProvider(window.ethereum);
const getSigner = async () => (await getProvider()).getSigner();

// è¯»å†™åˆ†ç¦»
const getContract = async (address, abi) => {
  const signer = await getSigner();
  return new ethers.Contract(address, abi, signer); // å¯å†™å®ä¾‹
};

const getReadOnlyContract = (address, abi) => {
  const provider = getProvider();
  return new ethers.Contract(address, abi, provider); // åªè¯»å®ä¾‹
};
```

**åˆçº¦å®ä¾‹ç®¡ç†:**
1. **å†™å…¥æ“ä½œ**: éœ€è¦Signerè¿›è¡Œäº¤æ˜“ç­¾å
2. **è¯»å–æ“ä½œ**: ä½¿ç”¨Providerè¿›è¡ŒæŸ¥è¯¢ï¼ŒèŠ‚çœgas
3. **å®ä¾‹ç¼“å­˜**: é¿å…é‡å¤åˆ›å»ºåˆçº¦å®ä¾‹

### ğŸª çŠ¶æ€ç®¡ç† (Zustand Store)

**AuthStoreè®¾è®¡:**
```typescript
interface AuthState {
  account: string | null;        // é’±åŒ…åœ°å€
  isConnected: boolean;         // è¿æ¥çŠ¶æ€
  isCorrectNetwork: boolean;    // ç½‘ç»œæ£€æŸ¥
  isLoggedIn: boolean;         // åç«¯ç™»å½•çŠ¶æ€
  balance: string;             // YDä»£å¸ä½™é¢
  chainId: number | null;      // ç½‘ç»œID
}
```

**æŒä¹…åŒ–ç­–ç•¥:**
```typescript
persist(
  (set) => ({...}),
  {
    name: 'auth-storage',
    partialize: (state) => ({
      account: state.account,      // âœ… æŒä¹…åŒ–
      isLoggedIn: state.isLoggedIn,// âœ… æŒä¹…åŒ–
      chainId: state.chainId       // âœ… æŒä¹…åŒ–
      // isConnected: false,       // âŒ ä¸æŒä¹…åŒ–(éœ€è¦å®æ—¶æ£€æŸ¥)
      // balance: '0'              // âŒ ä¸æŒä¹…åŒ–(éœ€è¦å®æ—¶æŸ¥è¯¢)
    }),
  }
)
```

**è®¾è®¡ä¼˜åŠ¿:**
- **æ•°æ®åˆ†å±‚**: åŒºåˆ†éœ€è¦æŒä¹…åŒ–å’Œå®æ—¶æ•°æ®
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
- **å“åº”å¼æ›´æ–°**: ç»„ä»¶è‡ªåŠ¨å“åº”çŠ¶æ€å˜åŒ–

### ğŸ¯ ä¸šåŠ¡ç»„ä»¶æ¶æ„

**è¯¾ç¨‹ç®¡ç† (features/courses/):**
```
courses/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ CourseCard.tsx         # è¯¾ç¨‹å¡ç‰‡
â”‚   â”œâ”€â”€ CourseDetailModal.tsx  # è¯¾ç¨‹è¯¦æƒ…å¼¹çª—
â”‚   â””â”€â”€ CreateCourseModal.tsx  # åˆ›å»ºè¯¾ç¨‹å¼¹çª—
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useCourseList.ts       # è¯¾ç¨‹åˆ—è¡¨ç®¡ç†
â”‚   â””â”€â”€ useCourseActions.ts    # è¯¾ç¨‹æ“ä½œ
â””â”€â”€ types.ts                   # è¯¾ç¨‹ç›¸å…³ç±»å‹
```

**æ ¸å¿ƒHookå®ç°:**
```typescript
const useCourseActions = () => {
  const { getYDTokenContract, getCourseManagerContract } = useContracts();
  
  const purchaseCourse = async (courseId: number, price: string) => {
    // 1. æ£€æŸ¥å¹¶æˆæƒYDä»£å¸
    const tokenContract = await getYDTokenContract();
    const allowance = await tokenContract.allowance(account, CONTRACT_ADDRESSES.CourseManager);
    
    if (allowance < ethers.parseEther(price)) {
      await tokenContract.approve(CONTRACT_ADDRESSES.CourseManager, ethers.parseEther(price));
    }
    
    // 2. æ‰§è¡Œè´­ä¹°äº¤æ˜“
    const courseContract = await getCourseManagerContract();
    const tx = await courseContract.purchaseCourse(courseId);
    await tx.wait(); // ç­‰å¾…äº¤æ˜“ç¡®è®¤
    
    // 3. è®°å½•åˆ°åç«¯æ•°æ®åº“
    await recordPurchase({
      userAddress: account,
      courseId: courseId.toString(),
      txHash: tx.hash,
      pricePaid: price
    });
  };
};
```

**è´¨æŠ¼åŠŸèƒ½ (features/staking/):**
```typescript
const useStaking = () => {
  const { getStakingContract, getYDTokenContract } = useContracts();
  
  const stake = async (amount: string) => {
    // 1. æˆæƒè´¨æŠ¼åˆçº¦ä½¿ç”¨YDä»£å¸
    const tokenContract = await getYDTokenContract();
    const tx1 = await tokenContract.approve(
      CONTRACT_ADDRESSES.SimpleStaking, 
      ethers.parseEther(amount)
    );
    await tx1.wait();
    
    // 2. æ‰§è¡Œè´¨æŠ¼
    const stakingContract = await getStakingContract();
    const tx2 = await stakingContract.stake(ethers.parseEther(amount));
    await tx2.wait();
  };
};
```

---

## ğŸ”§ åç«¯æœåŠ¡å±‚ (backend/)

### ğŸ“ é¡¹ç›®ç»“æ„
```
backend/src/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”œâ”€â”€ course.controller.ts
â”‚   â”‚   â””â”€â”€ user.controller.ts
â”‚   â””â”€â”€ routes/         # è·¯ç”±é…ç½®
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ repositories/   # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â””â”€â”€ config/            # é…ç½®æ–‡ä»¶
```

### ğŸ—ï¸ åˆ†å±‚æ¶æ„è®¾è®¡

**1. Controllerå±‚ (æ§åˆ¶å™¨)**
```typescript
// course.controller.ts
export class CourseController extends BaseController {
  async createCourse(req: Request, res: Response) {
    const { courseId, title, description } = req.body;
    
    // æ•°æ®éªŒè¯
    if (!courseId || !title) {
      return this.badRequest(res, 'å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©º');
    }
    
    // è°ƒç”¨ä¸šåŠ¡é€»è¾‘å±‚
    const result = await courseService.createCourse({
      courseId, title, description
    });
    
    // ç»Ÿä¸€å“åº”æ ¼å¼
    if (result.success) {
      this.success(res, result.data);
    } else {
      this.error(res, result.error);
    }
  }
}
```

**2. Serviceå±‚ (ä¸šåŠ¡é€»è¾‘)**
```typescript
// course.service.ts
export class CourseService {
  async createCourse(courseData: CreateCourseRequest) {
    try {
      // ä¸šåŠ¡é€»è¾‘å¤„ç†
      const existingCourse = await courseRepository.findByCourseId(courseData.courseId);
      if (existingCourse) {
        return { success: false, error: 'è¯¾ç¨‹å·²å­˜åœ¨' };
      }
      
      // æ•°æ®æŒä¹…åŒ–
      const course = await courseRepository.create(courseData);
      return { success: true, data: course };
    } catch (error) {
      return { success: false, error: error.message };
    }
  }
}
```

**3. Repositoryå±‚ (æ•°æ®è®¿é—®)**
```typescript
// course.repository.ts
export class CourseRepository {
  async create(courseData: Course): Promise<Course> {
    const sql = `
      INSERT INTO courses (course_id, title, description, instructor_address)
      VALUES (?, ?, ?, ?)
    `;
    const [result] = await db.execute(sql, [
      courseData.courseId,
      courseData.title,
      courseData.description,
      courseData.instructorAddress
    ]);
    return { ...courseData, id: result.insertId };
  }
}
```

### ğŸ” è®¤è¯ä¸å®‰å…¨

**æ•°å­—ç­¾åéªŒè¯:**
```typescript
// auth.service.ts
export class AuthService {
  async verifySignature(
    walletAddress: string, 
    signature: string, 
    message: string
  ): Promise<boolean> {
    try {
      // ä½¿ç”¨ethers.jséªŒè¯ç­¾å
      const recoveredAddress = ethers.verifyMessage(message, signature);
      return recoveredAddress.toLowerCase() === walletAddress.toLowerCase();
    } catch (error) {
      console.error('ç­¾åéªŒè¯å¤±è´¥:', error);
      return false;
    }
  }
  
  async login(loginData: LoginRequest): Promise<LoginResponse> {
    // 1. éªŒè¯æ•°å­—ç­¾å
    const isValidSignature = await this.verifySignature(
      loginData.walletAddress,
      loginData.signature,
      loginData.message
    );
    
    if (!isValidSignature) {
      return { success: false, error: 'ç­¾åéªŒè¯å¤±è´¥' };
    }
    
    // 2. ç”Ÿæˆä¼šè¯ä»¤ç‰Œ
    const sessionToken = this.generateSessionToken();
    await sessionService.createSession({
      walletAddress: loginData.walletAddress,
      sessionToken,
      expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000) // 24å°æ—¶
    });
    
    return { success: true, data: { sessionToken } };
  }
}
```

**Nonceæœºåˆ¶:**
```typescript
// nonce.service.ts
export class NonceService {
  private nonces: Map<string, {value: string, expiresAt: number}> = new Map();
  
  generateNonce(walletAddress: string): string {
    const nonce = Math.random().toString(36).substring(2, 15);
    const expiresAt = Date.now() + 10 * 60 * 1000; // 10åˆ†é’Ÿè¿‡æœŸ
    
    this.nonces.set(walletAddress, { value: nonce, expiresAt });
    return nonce;
  }
  
  validateAndConsume(walletAddress: string, nonce: string): boolean {
    const stored = this.nonces.get(walletAddress);
    
    if (!stored || stored.value !== nonce || Date.now() > stored.expiresAt) {
      return false;
    }
    
    this.nonces.delete(walletAddress); // ä¸€æ¬¡æ€§ä½¿ç”¨
    return true;
  }
}
```

### ğŸ“Š æ•°æ®åº“è®¾è®¡

**æ ¸å¿ƒè¡¨ç»“æ„:**
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    wallet_address VARCHAR(42) UNIQUE NOT NULL,
    nickname VARCHAR(100),
    bio TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- è¯¾ç¨‹æ‰©å±•è¡¨
CREATE TABLE courses (
    id INT PRIMARY KEY AUTO_INCREMENT,
    course_id VARCHAR(50) UNIQUE NOT NULL,  -- å¯¹åº”åŒºå—é“¾è¯¾ç¨‹ID
    title VARCHAR(200),
    description TEXT,
    category VARCHAR(50),
    cover_image_url VARCHAR(500),
    instructor_address VARCHAR(42),
    tx_hash VARCHAR(66),                    -- åˆ›å»ºäº¤æ˜“å“ˆå¸Œ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- è´­ä¹°è®°å½•è¡¨
CREATE TABLE purchases (
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_address VARCHAR(42) NOT NULL,
    course_id VARCHAR(50) NOT NULL,
    tx_hash VARCHAR(66) UNIQUE NOT NULL,    -- è´­ä¹°äº¤æ˜“å“ˆå¸Œ
    price_paid DECIMAL(20,8),               -- æ”¯ä»˜ä»·æ ¼
    purchase_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (course_id) REFERENCES courses(course_id)
);

-- ä¼šè¯ç®¡ç†è¡¨
CREATE TABLE sessions (
    id INT PRIMARY KEY AUTO_INCREMENT,
    wallet_address VARCHAR(42) NOT NULL,
    session_token VARCHAR(128) UNIQUE NOT NULL,
    expires_at TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**æ··åˆå­˜å‚¨ç­–ç•¥:**
1. **åŒºå—é“¾å­˜å‚¨**: æ ¸å¿ƒäº¤æ˜“æ•°æ®ï¼ˆä»·æ ¼ã€è´­ä¹°è®°å½•ç­‰ï¼‰
2. **æ•°æ®åº“å­˜å‚¨**: æ‰©å±•ä¿¡æ¯ï¼ˆåˆ†ç±»ã€å°é¢å›¾ã€ç”¨æˆ·èµ„æ–™ç­‰ï¼‰
3. **æ•°æ®åŒæ­¥**: é€šè¿‡äº¤æ˜“å“ˆå¸Œå…³è”åŒºå—é“¾å’Œæ•°æ®åº“è®°å½•

### ğŸ”„ APIæ¥å£è®¾è®¡

**RESTful APIç»“æ„:**
```
POST /api/auth/login              # ç”¨æˆ·ç™»å½•
POST /api/auth/logout             # ç”¨æˆ·ç™»å‡º
GET  /api/auth/verify-session     # éªŒè¯ä¼šè¯

GET  /api/courses                 # è·å–è¯¾ç¨‹åˆ—è¡¨
POST /api/courses                 # åˆ›å»ºè¯¾ç¨‹
GET  /api/courses/:id/extras      # è·å–è¯¾ç¨‹æ‰©å±•ä¿¡æ¯
POST /api/courses/:id/details     # è·å–è¯¾ç¨‹è¯¦æƒ…ï¼ˆéœ€ç­¾åï¼‰

GET  /api/users/:address          # è·å–ç”¨æˆ·ä¿¡æ¯
POST /api/users/profile           # æ›´æ–°ç”¨æˆ·èµ„æ–™ï¼ˆéœ€ç­¾åï¼‰

POST /api/purchases               # è®°å½•è´­ä¹°
GET  /api/purchases/user/:address # è·å–ç”¨æˆ·è´­ä¹°è®°å½•

POST /api/nonce/generate          # ç”Ÿæˆéšæœºæ•°
GET  /api/nonce/stats            # éšæœºæ•°ç»Ÿè®¡
```

**ç»Ÿä¸€å“åº”æ ¼å¼:**
```typescript
interface ApiResponse<T> {
  success: boolean;    // æ“ä½œæ˜¯å¦æˆåŠŸ
  data?: T;           // æˆåŠŸæ—¶è¿”å›çš„æ•°æ®
  error?: string;     // å¤±è´¥æ—¶çš„é”™è¯¯ä¿¡æ¯
  message?: string;   // å¯é€‰çš„é™„åŠ ä¿¡æ¯
}
```

---

## ğŸ”„ å‰åç«¯è”åŠ¨æœºåˆ¶

### ğŸ¯ æ ¸å¿ƒäº¤äº’æµç¨‹

**1. ç”¨æˆ·è®¤è¯æµç¨‹**
```
1. å‰ç«¯ â†’ ç”Ÿæˆéšæœºæ•°è¯·æ±‚ â†’ åç«¯
2. åç«¯ â†’ è¿”å›nonce â†’ å‰ç«¯
3. å‰ç«¯ â†’ ç”¨æˆ·ç­¾åæ¶ˆæ¯ â†’ MetaMask
4. å‰ç«¯ â†’ æäº¤ç­¾å+æ¶ˆæ¯ â†’ åç«¯
5. åç«¯ â†’ éªŒè¯ç­¾å â†’ ç”Ÿæˆsession â†’ å‰ç«¯
6. å‰ç«¯ â†’ ä¿å­˜sessionToken â†’ localStorage
```

**2. è¯¾ç¨‹è´­ä¹°æµç¨‹**
```
1. å‰ç«¯ â†’ æ£€æŸ¥YDä»£å¸ä½™é¢ â†’ æ™ºèƒ½åˆçº¦
2. å‰ç«¯ â†’ æˆæƒä»£å¸ä½¿ç”¨ â†’ YDTokenåˆçº¦
3. å‰ç«¯ â†’ æ‰§è¡Œè´­ä¹°äº¤æ˜“ â†’ CourseManageråˆçº¦
4. å‰ç«¯ â†’ ç­‰å¾…äº¤æ˜“ç¡®è®¤ â†’ åŒºå—é“¾
5. å‰ç«¯ â†’ è®°å½•è´­ä¹°ä¿¡æ¯ â†’ åç«¯API
6. åç«¯ â†’ å­˜å‚¨äº¤æ˜“å“ˆå¸Œ â†’ MySQLæ•°æ®åº“
```

**3. è¯¾ç¨‹è¯¦æƒ…è®¿é—®æµç¨‹**
```
1. å‰ç«¯ â†’ æ£€æŸ¥è´­ä¹°çŠ¶æ€ â†’ CourseManageråˆçº¦
2. å‰ç«¯ â†’ è¯·æ±‚è®¿é—®æ¶ˆæ¯ â†’ åç«¯API
3. åç«¯ â†’ ç”Ÿæˆè®¿é—®ä»¤ç‰Œ â†’ å‰ç«¯
4. å‰ç«¯ â†’ ç­¾åè®¿é—®ä»¤ç‰Œ â†’ MetaMask
5. å‰ç«¯ â†’ æäº¤è®¿é—®ç­¾å â†’ åç«¯API
6. åç«¯ â†’ éªŒè¯ç­¾åå’Œæƒé™ â†’ è¿”å›è¯¾ç¨‹å†…å®¹
```

### ğŸ” å®‰å…¨æœºåˆ¶è®¾è®¡

**å¤šé‡éªŒè¯ä½“ç³»:**
1. **Nonceé˜²é‡æ”¾**: æ¯æ¬¡è¯·æ±‚ä½¿ç”¨ä¸€æ¬¡æ€§éšæœºæ•°
2. **æ—¶é—´æˆ³éªŒè¯**: é˜²æ­¢è¿‡æœŸç­¾åè¢«é‡å¤ä½¿ç”¨
3. **ç­¾åç¼“å­˜**: å‡å°‘é‡å¤ç­¾åï¼Œæå‡ç”¨æˆ·ä½“éªŒ
4. **ä¼šè¯ç®¡ç†**: æœåŠ¡ç«¯sessionæ§åˆ¶è®¿é—®æƒé™

**æƒé™æ§åˆ¶:**
```typescript
// è´­ä¹°éªŒè¯ä¸­é—´ä»¶
const verifyPurchase = async (req, res, next) => {
  const { courseId } = req.params;
  const { userAddress, signature, timestamp } = req.body;
  
  // 1. éªŒè¯ç­¾å
  const message = `Access course ${courseId} at ${timestamp}`;
  const isValidSignature = await authService.verifySignature(
    userAddress, signature, message
  );
  
  // 2. æ£€æŸ¥åŒºå—é“¾è´­ä¹°çŠ¶æ€
  const courseContract = getCourseManagerContract();
  const hasPurchased = await courseContract.hasPurchased(userAddress, courseId);
  
  // 3. æƒé™æ£€æŸ¥
  if (!isValidSignature || !hasPurchased) {
    return res.status(403).json({ success: false, error: 'è®¿é—®è¢«æ‹’ç»' });
  }
  
  next();
};
```

### ğŸ“Š æ•°æ®ä¸€è‡´æ€§ä¿è¯

**åŒºå—é“¾ä¸æ•°æ®åº“åŒæ­¥:**
```typescript
// è´­ä¹°è®°å½•åŒæ­¥
const syncPurchaseRecord = async (txHash: string) => {
  // 1. ä»åŒºå—é“¾è·å–äº¤æ˜“è¯¦æƒ…
  const provider = getProvider();
  const receipt = await provider.getTransactionReceipt(txHash);
  
  // 2. è§£æè´­ä¹°äº‹ä»¶
  const courseContract = getCourseManagerReadOnly();
  const events = await courseContract.queryFilter(
    courseContract.filters.CoursePurchased(),
    receipt.blockNumber,
    receipt.blockNumber
  );
  
  // 3. æ›´æ–°æ•°æ®åº“è®°å½•
  for (const event of events) {
    if (event.transactionHash === txHash) {
      await purchaseRepository.updateStatus(txHash, 'confirmed');
    }
  }
};
```

**é”™è¯¯å¤„ç†ä¸å›æ»š:**
```typescript
const handleTransactionError = async (txHash: string, error: any) => {
  // 1. æ ‡è®°æ•°æ®åº“è®°å½•ä¸ºå¤±è´¥
  await purchaseRepository.updateStatus(txHash, 'failed');
  
  // 2. è®°å½•é”™è¯¯æ—¥å¿—
  console.error('äº¤æ˜“æ‰§è¡Œå¤±è´¥:', {
    txHash,
    error: error.message,
    timestamp: new Date().toISOString()
  });
  
  // 3. é€šçŸ¥å‰ç«¯æ›´æ–°çŠ¶æ€
  return {
    success: false,
    error: 'äº¤æ˜“æ‰§è¡Œå¤±è´¥ï¼Œè¯·é‡è¯•',
    txHash
  };
};
```

---

## ğŸ› ï¸ å¼€å‘å·¥å…·ä¸é…ç½®

### ğŸ“¦ åŒ…ç®¡ç†å’Œè„šæœ¬

**å‰ç«¯å¼€å‘è„šæœ¬:**
```json
{
  "scripts": {
    "dev": "vite",                    // å¯åŠ¨å¼€å‘æœåŠ¡å™¨
    "build": "tsc -b && vite build", // ç±»å‹æ£€æŸ¥+æ„å»º
    "lint": "eslint .",               // ä»£ç æ£€æŸ¥
    "preview": "vite preview"         // é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
  }
}
```

**åç«¯å¼€å‘è„šæœ¬:**
```json
{
  "scripts": {
    "dev": "nodemon src/server.ts",   // çƒ­é‡è½½å¼€å‘
    "build": "tsc",                   // TypeScriptç¼–è¯‘
    "start": "node dist/server.js"    // ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
  }
}
```

**æ™ºèƒ½åˆçº¦è„šæœ¬:**
```json
{
  "scripts": {
    "compile": "npx hardhat compile",           // ç¼–è¯‘åˆçº¦
    "test": "npx hardhat test",                // è¿è¡Œæµ‹è¯•
    "deploy": "npx hardhat run scripts/deploy.ts", // éƒ¨ç½²åˆçº¦
    "verify": "npx hardhat verify"             // éªŒè¯åˆçº¦
  }
}
```

### ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

**Viteé…ç½® (vite.config.ts):**
```typescript
export default defineConfig({
  plugins: [react(), tailwindcss()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),      // è·¯å¾„åˆ«å
      '@components': path.resolve(__dirname, './src/components'),
      '@hooks': path.resolve(__dirname, './src/hooks'),
      '@services': path.resolve(__dirname, './src/services'),
    }
  },
  server: {
    port: 5173,                                  // å¼€å‘æœåŠ¡å™¨ç«¯å£
    proxy: {
      '/api': 'http://localhost:3001'            // APIä»£ç†
    }
  }
});
```

**TypeScripté…ç½®:**
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "strict": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@hooks/*": ["src/hooks/*"]
    }
  }
}
```

**TailwindCSS v4é…ç½®:**
```typescript
// tailwind.config.ts
import tailwind from '@tailwindcss/vite';

export default {
  plugins: [tailwind()],
  theme: {
    extend: {
      colors: {
        primary: '#3b82f6',      // è‡ªå®šä¹‰ä¸»è‰²è°ƒ
        secondary: '#64748b'
      }
    }
  }
}
```

### ğŸš€ éƒ¨ç½²ä¸è¿ç»´

**ç¯å¢ƒå˜é‡é…ç½®:**
```bash
# å‰ç«¯ (.env)
VITE_CONTRACT_YD_TOKEN=0x752250B9471b77e85c3DE330db8a5d7802Eb87d7
VITE_CONTRACT_COURSE_MANAGER=0xCb4A483c8F1F84BF0128a7081c0d4FC4A2607EE7
VITE_CONTRACT_SIMPLE_STAKING=0xf5924164C4685f650948bf4a51124f0CB24DA026
VITE_SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_KEY

# åç«¯ (.env)
DATABASE_URL=mysql://user:password@localhost:3306/edu3_university
FRONTEND_URL=http://localhost:5173
JWT_SECRET=your_jwt_secret_here

# åˆçº¦éƒ¨ç½² (.env)
SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_KEY
SEPOLIA_PRIVATE_KEY=your_private_key_here
ETHERSCAN_API_KEY=your_etherscan_key_here
```

**Dockeréƒ¨ç½²é…ç½®:**
```yaml
# docker-compose.yml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports:
      - "5173:5173"
    environment:
      - VITE_API_URL=http://localhost:3001
  
  backend:
    build: ./backend
    ports:
      - "3001:3001"
    environment:
      - DATABASE_URL=mysql://user:password@db:3306/edu3_university
    depends_on:
      - db
  
  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: edu3_university
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data:
```

---

## ğŸ“š æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“

### ğŸ”— åŒºå—é“¾æŠ€æœ¯

**1. æ™ºèƒ½åˆçº¦å¼€å‘**
- **Solidityè¯­æ³•**: åˆçº¦ç»§æ‰¿ã€ä¿®é¥°å™¨ã€äº‹ä»¶æœºåˆ¶
- **OpenZeppelinåº“**: ERC20æ ‡å‡†ã€è®¿é—®æ§åˆ¶ã€å®‰å…¨åˆçº¦
- **Gasä¼˜åŒ–**: æ•°æ®ç»“æ„è®¾è®¡ã€å‡½æ•°ä¼˜åŒ–ã€äº‹ä»¶ä½¿ç”¨
- **å®‰å…¨æœ€ä½³å®è·µ**: é‡å…¥æ”»å‡»é˜²æŠ¤ã€æƒé™æ§åˆ¶ã€è¾“å…¥éªŒè¯

**2. Web3äº¤äº’**
- **ethers.js**: Provider/Signeræ¨¡å¼ã€åˆçº¦è°ƒç”¨ã€äº‹ä»¶ç›‘å¬
- **MetaMaské›†æˆ**: é’±åŒ…è¿æ¥ã€ç½‘ç»œåˆ‡æ¢ã€äº¤æ˜“ç­¾å
- **äº¤æ˜“ç®¡ç†**: Nonceå¤„ç†ã€Gasè´¹ä¼°ç®—ã€äº¤æ˜“ç¡®è®¤ç­‰å¾…

### ğŸ¨ å‰ç«¯æŠ€æœ¯

**1. Reactç”Ÿæ€**
- **React 19**: æœ€æ–°ç‰¹æ€§ã€å¹¶å‘æ¸²æŸ“ã€è‡ªåŠ¨æ‰¹å¤„ç†
- **TypeScript**: ç±»å‹å®‰å…¨ã€æ¥å£è®¾è®¡ã€æ³›å‹ä½¿ç”¨
- **è‡ªå®šä¹‰Hooks**: é€»è¾‘å¤ç”¨ã€çŠ¶æ€å°è£…ã€å‰¯ä½œç”¨ç®¡ç†

**2. çŠ¶æ€ç®¡ç†**
- **Zustand**: è½»é‡çº§çŠ¶æ€ç®¡ç†ã€ä¸­é—´ä»¶ä½¿ç”¨ã€æŒä¹…åŒ–
- **çŠ¶æ€è®¾è®¡**: å•ä¸€æ•°æ®æºã€ä¸å¯å˜æ›´æ–°ã€æ´¾ç”ŸçŠ¶æ€

**3. å·¥ç¨‹åŒ–å·¥å…·**
- **Vite**: å¿«é€Ÿæ„å»ºã€HMRã€æ’ä»¶ç³»ç»Ÿ
- **TailwindCSS**: åŸå­åŒ–CSSã€å“åº”å¼è®¾è®¡ã€ä¸»é¢˜å®šåˆ¶
- **ESLint**: ä»£ç è§„èŒƒã€è‡ªåŠ¨ä¿®å¤ã€å›¢é˜Ÿåä½œ

### ğŸ”§ åç«¯æŠ€æœ¯

**1. Node.jsæ¶æ„**
- **åˆ†å±‚è®¾è®¡**: Controller-Service-Repositoryæ¨¡å¼
- **ä¸­é—´ä»¶**: é”™è¯¯å¤„ç†ã€è®¤è¯éªŒè¯ã€è¯·æ±‚æ—¥å¿—
- **å¼‚æ­¥ç¼–ç¨‹**: Promise/async-awaitã€é”™è¯¯æ•è·

**2. æ•°æ®åº“è®¾è®¡**
- **å…³ç³»å‹è®¾è®¡**: è¡¨ç»“æ„è®¾è®¡ã€å¤–é”®çº¦æŸã€ç´¢å¼•ä¼˜åŒ–
- **æ··åˆå­˜å‚¨**: åŒºå—é“¾+æ•°æ®åº“ã€æ•°æ®ä¸€è‡´æ€§ã€åŒæ­¥æœºåˆ¶

**3. å®‰å…¨æœºåˆ¶**
- **æ•°å­—ç­¾å**: æ¶ˆæ¯ç­¾åã€åœ°å€æ¢å¤ã€é˜²ç¯¡æ”¹
- **ä¼šè¯ç®¡ç†**: Tokenç”Ÿæˆã€è¿‡æœŸæ§åˆ¶ã€æƒé™éªŒè¯
- **é˜²æ”»å‡»**: SQLæ³¨å…¥é˜²æŠ¤ã€XSSé˜²æŠ¤ã€CSRFé˜²æŠ¤

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

**1. åˆ†å±‚æ¶æ„**
```
è¡¨ç°å±‚ (Reactç»„ä»¶)
    â†•
ä¸šåŠ¡å±‚ (Hooks + Services)  
    â†•
æ•°æ®å±‚ (æ™ºèƒ½åˆçº¦ + æ•°æ®åº“)
```

**2. æ•°æ®æµç®¡ç†**
```
ç”¨æˆ·æ“ä½œ â†’ çŠ¶æ€æ›´æ–° â†’ ç»„ä»¶é‡æ¸²æŸ“
         â†“
      APIè°ƒç”¨ â†’ åç«¯å¤„ç† â†’ æ•°æ®åº“æ“ä½œ
         â†“
    åŒºå—é“¾äº¤äº’ â†’ äº¤æ˜“ç¡®è®¤ â†’ äº‹ä»¶è§¦å‘
```

**3. é”™è¯¯å¤„ç†**
- **åˆ†çº§å¤„ç†**: ç»„ä»¶çº§ã€é¡µé¢çº§ã€åº”ç”¨çº§é”™è¯¯è¾¹ç•Œ
- **ç”¨æˆ·å‹å¥½**: é”™è¯¯ä¿¡æ¯æœ¬åœ°åŒ–ã€æ“ä½œæŒ‡å¼•
- **å¼€å‘è°ƒè¯•**: è¯¦ç»†æ—¥å¿—ã€é”™è¯¯è¿½è¸ªã€æ€§èƒ½ç›‘æ§

---

## ğŸ¯ é¡¹ç›®ç‰¹è‰²ä¸äº®ç‚¹

### ğŸ’¡ æŠ€æœ¯åˆ›æ–°ç‚¹

**1. æ··åˆå­˜å‚¨æ¶æ„**
- **æ ¸å¿ƒæ•°æ®ä¸Šé“¾**: ä»·æ ¼ã€è´­ä¹°è®°å½•ç­‰å…³é”®ä¿¡æ¯å­˜å‚¨åœ¨åŒºå—é“¾
- **æ‰©å±•æ•°æ®å…¥åº“**: åˆ†ç±»ã€å°é¢å›¾ç­‰è¾…åŠ©ä¿¡æ¯å­˜å‚¨åœ¨æ•°æ®åº“
- **æ•°æ®å…³è”**: é€šè¿‡äº¤æ˜“å“ˆå¸Œå»ºç«‹åŒºå—é“¾å’Œæ•°æ®åº“çš„å…³è”

**2. æ™ºèƒ½æƒé™ç³»ç»Ÿ**
- **å¤šé‡éªŒè¯**: æ•°å­—ç­¾å + åŒºå—é“¾çŠ¶æ€ + åç«¯æƒé™
- **ç¼“å­˜ä¼˜åŒ–**: ç­¾åç»“æœç¼“å­˜ï¼Œå‡å°‘é‡å¤ç­¾å
- **æ¸è¿›å¼ä½“éªŒ**: ä»åŒ¿åæµè§ˆåˆ°å®Œæ•´åŠŸèƒ½çš„å¹³æ»‘è¿‡æ¸¡

**3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
- **è‡ªåŠ¨ç½‘ç»œåˆ‡æ¢**: æ£€æµ‹å¹¶è‡ªåŠ¨æ·»åŠ Sepoliaæµ‹è¯•ç½‘
- **çŠ¶æ€æŒä¹…åŒ–**: åˆ·æ–°é¡µé¢ä¿æŒç™»å½•çŠ¶æ€
- **é”™è¯¯è¾¹ç•Œ**: ç»„ä»¶çº§é”™è¯¯å¤„ç†ï¼Œæå‡åº”ç”¨ç¨³å®šæ€§

### ğŸš€ ä¸šåŠ¡ä»·å€¼ä½“ç°

**1. å»ä¸­å¿ƒåŒ–æ•™è‚²å¹³å°**
- **å»é™¤ä¸­ä»‹**: è®²å¸ˆç›´æ¥è·å¾—æ”¶ç›Šï¼Œæ— éœ€å¹³å°æŠ½æˆ
- **å†…å®¹ç¡®æƒ**: åŒºå—é“¾è®°å½•ä¿è¯è¯¾ç¨‹æ‰€æœ‰æƒ
- **é€æ˜äº¤æ˜“**: æ‰€æœ‰äº¤æ˜“è®°å½•å…¬å¼€å¯éªŒè¯

**2. ä»£å¸ç»æµæ¨¡å‹**
- **æ¿€åŠ±æœºåˆ¶**: è´¨æŠ¼æŒ–çŸ¿é¼“åŠ±ç”¨æˆ·é•¿æœŸæŒæœ‰
- **ä»·å€¼å¾ªç¯**: å­¦ä¹ æ¶ˆè´¹ â†’ ä»£å¸æ”¯ä»˜ â†’ è´¨æŠ¼æ”¶ç›Š â†’ å†æ¬¡æ¶ˆè´¹
- **ç”Ÿæ€å»ºè®¾**: ä»£å¸ä½œä¸ºå¹³å°é€šè¯ï¼Œå»ºç«‹å®Œæ•´ç»æµä½“ç³»

**3. æŠ€æœ¯é—¨æ§›é™ä½**
- **Web2äº¤äº’ä½“éªŒ**: ä¼ ç»Ÿç”¨æˆ·ç•Œé¢ï¼Œé™ä½Web3ä½¿ç”¨é—¨æ§›
- **æ¸è¿›å¼æ¥å…¥**: æ”¯æŒä¼ ç»Ÿè´¦æˆ·ä½“ç³»è¿‡æ¸¡åˆ°é’±åŒ…è®¤è¯
- **é”™è¯¯å‹å¥½**: è¯¦ç»†çš„æ“ä½œæŒ‡å¼•å’Œé”™è¯¯æç¤º

### ğŸ”§ æ‰©å±•æ€§è®¾è®¡

**1. æ¨¡å—åŒ–æ¶æ„**
- **åŠŸèƒ½è§£è€¦**: è¯¾ç¨‹ç®¡ç†ã€ç”¨æˆ·ç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿç‹¬ç«‹å¼€å‘
- **æ¥å£æ ‡å‡†åŒ–**: RESTful APIè®¾è®¡ï¼Œæ”¯æŒå¤šç«¯æ¥å…¥
- **ç»„ä»¶å¤ç”¨**: UIç»„ä»¶åº“ï¼Œæ”¯æŒå¿«é€Ÿé¡µé¢å¼€å‘

**2. å¯æ‰©å±•æ€§**
- **åˆçº¦å‡çº§**: ä½¿ç”¨ä»£ç†æ¨¡å¼æ”¯æŒåˆçº¦é€»è¾‘å‡çº§
- **æ•°æ®åº“åˆ†ç‰‡**: æ”¯æŒå¤§è§„æ¨¡ç”¨æˆ·å’Œè¯¾ç¨‹æ•°æ®
- **ç¼“å­˜å±‚**: Redisé›†æˆï¼Œæå‡æŸ¥è¯¢æ€§èƒ½

**3. å®‰å…¨å¯æ§**
- **æƒé™åˆ†å±‚**: ç®¡ç†å‘˜ã€è®²å¸ˆã€å­¦å‘˜çš„å¤šçº§æƒé™ä½“ç³»  
- **å®¡è®¡è¿½è¸ª**: å®Œæ•´çš„æ“ä½œæ—¥å¿—å’Œå˜æ›´è®°å½•
- **ç¾éš¾æ¢å¤**: æ•°æ®å¤‡ä»½å’Œå¿«é€Ÿæ¢å¤æœºåˆ¶

---

## ğŸ“– æ€»ç»“

è¿™ä¸ªWeb3æ•™è‚²å¹³å°é¡¹ç›®å±•ç¤ºäº†åŒºå—é“¾æŠ€æœ¯åœ¨æ•™è‚²é¢†åŸŸçš„åˆ›æ–°åº”ç”¨ï¼Œé€šè¿‡æ™ºèƒ½åˆçº¦å®ç°äº†å»ä¸­å¿ƒåŒ–çš„è¯¾ç¨‹äº¤æ˜“ï¼Œé€šè¿‡ä»£å¸ç»æµå»ºç«‹äº†å®Œæ•´çš„æ¿€åŠ±ä½“ç³»ï¼Œé€šè¿‡æ··åˆå­˜å‚¨æ¶æ„å…¼é¡¾äº†å»ä¸­å¿ƒåŒ–å’Œç”¨æˆ·ä½“éªŒã€‚

é¡¹ç›®åœ¨æŠ€æœ¯å®ç°ä¸Šé‡‡ç”¨äº†ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼Œåœ¨æ¶æ„è®¾è®¡ä¸Šä½“ç°äº†åˆ†å±‚è§£è€¦çš„æ€æƒ³ï¼Œåœ¨ç”¨æˆ·ä½“éªŒä¸Šé™ä½äº†Web3çš„ä½¿ç”¨é—¨æ§›ï¼Œä¸ºåŒºå—é“¾åº”ç”¨çš„å¤§è§„æ¨¡æ™®åŠæä¾›äº†å¾ˆå¥½çš„å‚è€ƒä»·å€¼ã€‚

**å…³é”®æŠ€æœ¯æ ˆå›é¡¾:**
- **åŒºå—é“¾**: Solidity + Hardhat + Sepolia
- **å‰ç«¯**: React 19 + TypeScript + Vite + TailwindCSS + Zustand
- **åç«¯**: Node.js + Express + TypeScript + MySQL
- **Web3**: ethers.js + MetaMask

**æ ¸å¿ƒå®ç°äº®ç‚¹:**
- æ™ºèƒ½åˆçº¦çš„å®‰å…¨è®¾è®¡å’ŒGasä¼˜åŒ–
- Web3é’±åŒ…é›†æˆå’Œç”¨æˆ·è®¤è¯ä½“ç³»
- å‰åç«¯åˆ†ç¦»æ¶æ„å’ŒAPIè®¾è®¡
- æ•°å­—ç­¾åéªŒè¯å’Œæƒé™æ§åˆ¶
- æ··åˆå­˜å‚¨å’Œæ•°æ®ä¸€è‡´æ€§ä¿è¯

è¿™ä¸ªé¡¹ç›®ä¸ä»…æ˜¯ä¸€ä¸ªå®Œæ•´çš„Web3åº”ç”¨æ¡ˆä¾‹ï¼Œæ›´æ˜¯å­¦ä¹ åŒºå—é“¾å¼€å‘ã€ç°ä»£å‰ç«¯æŠ€æœ¯å’Œåç«¯æ¶æ„è®¾è®¡çš„ä¼˜ç§€æ•™æã€‚é€šè¿‡æ·±å…¥ç†è§£æ¯ä¸ªæŠ€æœ¯ç¯èŠ‚çš„å®ç°åŸç†å’Œè®¾è®¡æ€è·¯ï¼Œå¯ä»¥ä¸ºä»Šåçš„åŒºå—é“¾é¡¹ç›®å¼€å‘æä¾›åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚